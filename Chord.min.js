(function(){this.Chord=function(){var s,i,t,e,r,a,n,o,h,f,u;return e=/([A-G])(#|b)?([a-z0-9]*)(\/([A-G])(#|b)?)?/i,s="A".charCodeAt(0),t="G".charCodeAt(0),n=function(s){return this.keyChange(s,1)},a=function(s){return this.keyChange(s,-1)},r=function(i,e){var r;return r=i.toUpperCase().charCodeAt(0),r+=e,r>t&&(r=s),s>r&&(r=t),String.fromCharCode(r)},o=function(s,i){return"#"===i&&/^(B|E)$/.test(s)?[n(s),null]:"b"===i&&/^(C|F)$/.test(s)?[a(s),null]:[s,i]},h=function(s,i){var t;if(t=o(s,i),s=t[0],i=t[1],i){if("#"===i)return[n(s),"b"];if("b"===i)return[a(s),"#"]}return[s,i]},u=function(s,i){var t;return t=o(s,i),s=t[0],i=t[1],"b"===i?[s,null]:"#"===i?[n(s),null]:/^(B|E)$/.test(s)?[n(s),null]:[s,"#"]},f=function(s,i){var t;return t=o(s,i),s=t[0],i=t[1],"b"===i?[a(s),null]:"#"===i?[s,null]:/^(C|F)$/.test(s)?[a(s),null]:[s,"b"]},i=function(){function s(s,i,t,e,r){this.base=s,this.modifier=i,this.suffix=t,this.bassBase=e,this.bassModifier=r}return s.parse=function(i){var t;return(t=e.exec(i))?new s(t[1],t[2],t[3],t[5],t[6]):void 0},s.prototype.clone=function(){return new s(this.base,this.modifier,this.suffix,this.bassBase,this.bassModifier)},s.prototype.normalize=function(){var s,i,t;return s=this.clone(),i=o(this.base,this.modifier),s.base=i[0],s.modifier=i[1],this.bassBase&&(t=o(this.bassBase,this.bassModifier),s.bassBase=t[0],s.bassModifier=t[1]),s},s.prototype.switchModifier=function(){var s,i,t;return s=this.clone(),i=h(this.base,this.modifier),s.base=i[0],s.modifier=i[1],this.bassBase&&(t=h(this.bassBase,this.bassModifier),s.bassBase=t[0],s.bassModifier=t[1]),s},s.prototype.transposeUp=function(){var s,i,t;return s=this.clone(),i=u(this.base,this.modifier),s.base=i[0],s.modifier=i[1],this.bassBase&&(t=u(this.bassBase,this.bassModifier),s.bassBase=t[0],s.bassModifier=t[1]),s},s.prototype.transposeDown=function(){var s,i,t;return s=this.clone(),i=f(this.base,this.modifier),s.base=i[0],s.modifier=i[1],this.bassBase&&(t=f(this.bassBase,this.bassModifier),s.bassBase=t[0],s.bassModifier=t[1]),s},s.prototype.toString=function(){var s;return s=this.base+(this.modifier||"")+this.suffix,this.bassBase&&(s+="/"+this.bassBase+(this.bassModifier||"")),s},s}()}(this)}).call(this);