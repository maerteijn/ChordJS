(function(){this.Chord=function(){var a,b,c,d,e,f,g,h,i,j,k;return d=/([A-G])(#|b)?([^\/\s]*)(\/([A-G])(#|b)?)?/i,a="A".charCodeAt(0),c="G".charCodeAt(0),g=function(a){return this.keyChange(a,1)},f=function(a){return this.keyChange(a,-1)},e=function(b,d){var e;return e=b.toUpperCase().charCodeAt(0),e+=d,e>c&&(e=a),a>e&&(e=c),String.fromCharCode(e)},h=function(a,b){return"#"===b&&/^(B|E)$/.test(a)?[g(a),null]:"b"===b&&/^(C|F)$/.test(a)?[f(a),null]:[a,b]},i=function(a,b){var c;if(c=h(a,b),a=c[0],b=c[1],b){if("#"===b)return[g(a),"b"];if("b"===b)return[f(a),"#"]}return[a,b]},k=function(a,b){var c;return c=h(a,b),a=c[0],b=c[1],"b"===b?[a,null]:"#"===b?[g(a),null]:/^(B|E)$/.test(a)?[g(a),null]:[a,"#"]},j=function(a,b){var c;return c=h(a,b),a=c[0],b=c[1],"b"===b?[f(a),null]:"#"===b?[a,null]:/^(C|F)$/.test(a)?[f(a),null]:[a,"b"]},b=function(){function a(a,b,c,d,e){this.base=a,this.modifier=b,this.suffix=c,this.bassBase=d,this.bassModifier=e}return a.parse=function(b){var c;return(c=d.exec(b))?new a(c[1],c[2],c[3],c[5],c[6]):void 0},a.prototype.clone=function(){return new a(this.base,this.modifier,this.suffix,this.bassBase,this.bassModifier)},a.prototype.normalize=function(){var a,b,c;return a=this.clone(),b=h(this.base,this.modifier),a.base=b[0],a.modifier=b[1],this.bassBase&&(c=h(this.bassBase,this.bassModifier),a.bassBase=c[0],a.bassModifier=c[1]),a},a.prototype.switchModifier=function(){var a,b,c;return a=this.clone(),b=i(this.base,this.modifier),a.base=b[0],a.modifier=b[1],this.bassBase&&(c=i(this.bassBase,this.bassModifier),a.bassBase=c[0],a.bassModifier=c[1]),a},a.prototype.transposeUp=function(){var a,b,c;return a=this.clone(),b=k(this.base,this.modifier),a.base=b[0],a.modifier=b[1],this.bassBase&&(c=k(this.bassBase,this.bassModifier),a.bassBase=c[0],a.bassModifier=c[1]),a},a.prototype.transposeDown=function(){var a,b,c;return a=this.clone(),b=j(this.base,this.modifier),a.base=b[0],a.modifier=b[1],this.bassBase&&(c=j(this.bassBase,this.bassModifier),a.bassBase=c[0],a.bassModifier=c[1]),a},a.prototype.toString=function(){var a;return a=this.base+(this.modifier||"")+this.suffix,this.bassBase&&(a+="/"+this.bassBase+(this.bassModifier||"")),a},a}()}(this)}).call(this);